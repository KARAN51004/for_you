<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="shortcut icon" type="image/png" href="img/favicon.png" />
  <title>Happy Birthday!!! :)</title>

  <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400&display=swap" rel="stylesheet">

  <!-- Styles -->
  <style>
    html { box-sizing: border-box; }
    *, *:before, *:after { box-sizing: inherit; }

    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #ffdde1, #ee9ca7, #b8c6db, #f5d9d9);
      background-size: 400% 400%;
      animation: bgMove 12s ease infinite;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      overflow-x: hidden;
    }
    @keyframes bgMove {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .song { visibility: hidden; }
    .hidden { display: none !important; }

    /* COUNTDOWN */
    .countdown {
      font-size: 6rem;
      font-weight: 700;
      text-align: center;
      margin: 0;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      animation: glow 1s infinite alternate;
    }
    @keyframes glow {
      from { text-shadow: 0 0 5px #ff69b4; }
      to   { text-shadow: 0 0 20px #ff1493, 0 0 40px #ff69b4; }
    }

    /* GIFT BOX */
    .gift-box-container {
      width: 100%;
      max-width: 500px;
      margin: 20px auto;
      position: relative;
    }
    
    .gift-box {
      width: 200px;
      height: 200px;
      margin: 0 auto;
      position: relative;
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    
    .gift-box:hover {
      transform: scale(1.05);
    }
    
    .gift-box .box {
      position: absolute;
      width: 100%;
      height: 100%;
      background-color: #e74c3c;
      border-radius: 10px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
    
    .gift-box .lid {
      position: absolute;
      width: 110%;
      height: 30px;
      background-color: #c0392b;
      border-radius: 10px 10px 0 0;
      top: -30px;
      left: -5%;
      box-shadow: 0 5px 10px rgba(0,0,0,0.2);
    }
    
    .gift-box .ribbon {
      position: absolute;
      background-color: #fff;
    }
    
    .gift-box .ribbon-h {
      width: 30px;
      height: 100%;
      left: calc(50% - 15px);
    }
    
    .gift-box .ribbon-v {
      width: 100%;
      height: 30px;
      top: calc(50% - 15px);
    }
    
    .gift-box .bow {
      position: absolute;
      width: 50px;
      height: 50px;
      background-color: #fff;
      border-radius: 50%;
      top: calc(50% - 25px);
      left: calc(50% - 25px);
      z-index: 2;
    }
    
    .gift-box .bow:before,
    .gift-box .bow:after {
      content: '';
      position: absolute;
      width: 60px;
      height: 30px;
      background-color: #fff;
      border-radius: 50%;
    }
    
    .gift-box .bow:before {
      top: -15px;
      left: -5px;
      transform: rotate(-30deg);
    }
    
    .gift-box .bow:after {
      top: -15px;
      right: -5px;
      transform: rotate(30deg);
    }
    
    .gift-layer-text {
      margin-top: 20px;
      font-size: 1.2rem;
      background: rgba(255, 255, 255, 0.8);
      padding: 10px 15px;
      border-radius: 10px;
      max-width: 400px;
      margin: 20px auto;
    }
    
    .open-instruction {
      margin-top: 15px;
      font-size: 1rem;
      color: #333;
      opacity: 0.8;
    }

    /* VIDEO OVERLAY */
    .video-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.84);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 18px;
      z-index: 1000;
      flex-direction: column;
    }
    #surprise-video {
      max-width: 92vw;
      max-height: 82vh;
      border-radius: 16px;
      background: #000;
      outline: none;
    }
    .video-help {
      color: #fff;
      font-size: 1rem;
      opacity: .9;
    }

    /* ORIGINAL LAYOUT - ADJUSTED FOR SINGLE SCREEN */
    .container {
      margin: 0 auto;
      overflow: hidden;
      position: relative;
      text-align: center;
      visibility: hidden;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding: 20px 0;
    }
    .container > div { 
      position: relative; 
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
      margin: 15px 0;
    }

    .one { font-size: 4.5rem; margin-top: 20px; }
    .two { font-size: 1.2rem; font-weight: lighter; }
    .three { font-size: 3rem; }

    .four .text-box {
      border: 3px solid #aaa; 
      border-radius: 5px;
      margin: 0 auto; 
      padding: 10px; 
      position: relative; 
      width: min(600px, 90%);
      min-height: 150px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .text-box p { 
      margin: 0; 
      text-align: center; 
      width: 100%;
    }
    .text-box span { visibility: hidden; }
    .text-box .fake-btn {
      background-color: rgb(21, 161, 237);
      border-radius: 3px;
      bottom: -50px; 
      color: #fff; 
      padding: .5rem 1rem; 
      position: absolute; 
      right: 5px;
      cursor: pointer;
    }

    .five p { 
      font-size: 2rem; 
      text-align: center;
      margin: 10px 0;
    }
    .idea-3 strong { 
      border-radius: 3px; 
      display: inline-block; 
      padding: 3px 5px; 
      background-color: rgb(21, 161, 237);
      color: white;
    }
    .five .idea-5 { font-size: 4rem; }
    .idea-5 span, .idea-6 span, .wish-hbd span { display: inline-block; }
    .idea-6 span{ font-size: 15rem; }

    .six { 
      position: relative; 
      z-index: 1; 
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 20px 0;
    }
    .six img { 
      display: inline-block; 
      height: 350px; 
      max-width: 100%; 
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    .six .hat { 
      position: absolute; 
      top: -35%; 
      width: 80px; 
    }

    .baloons img { display: inline-block; position: absolute; }
    .baloons img:nth-child(even) { left: -10%; }
    .baloons img:nth-child(odd) { right: -10%; }

    .seven, .eight { 
      position: fixed; 
      top: 0; 
      width: 100vw; 
      height: 100vh;
      pointer-events: none;
    }
    .eight svg { 
      position: absolute; 
      visibility: hidden; 
      width: 25px; 
      z-index: -1; 
    }

    .wish-hbd {
      font-size: 3em; 
      margin: 0; 
      text-transform: uppercase;
      text-shadow: 0 0 10px #ff69b4, 0 0 20px #ff1493, 0 0 40px #ff69b4;
      animation: glow 2s infinite alternate;
    }
    .wish h5 { 
      font-size: 2rem; 
      font-weight: lighter; 
      margin: 10px 0 0; 
    }

    .nine p { 
      font-size: 2rem; 
      font-weight: lighter; 
      text-align: center;
    }
    #replay { 
      cursor: pointer; 
      z-index: 3; 
      color: #ff69b4;
      text-decoration: underline;
    }
    .last-smile {
      font-size: 3rem;
      margin-top: 20px;
    }

    /* FIREWORKS */
    #fireworks {
      position: fixed; 
      top: 0; 
      left: 0;
      width: 100vw; 
      height: 100vh;
      pointer-events: none; 
      z-index: 999;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 10px 0;
        justify-content: flex-start;
      }
      
      .container > div {
        margin: 10px 0;
      }
      
      .one { 
        font-size: 3.5rem; 
        margin-top: 15px;
      }
      
      .three {
        font-size: 2.5rem;
      }
      
      .four .text-box { 
        width: 90%; 
        min-height: 120px;
      }
      
      .five p {
        font-size: 1.6rem;
        margin: 8px 0;
      }
      
      .five .idea-5 { 
        font-size: 3rem; 
      }
      
      .idea-6 span { 
        font-size: 10rem; 
      }
      
      .six img { 
        height: 280px; 
      }
      
      .six .hat { 
        width: 50px; 
        top: -25%;
      }
      
      .wish-hbd { 
        font-size: 2.2em; 
      }
      
      .wish h5 { 
        font-size: 1.4rem; 
        padding: 0 10px;
      }
      
      .nine p { 
        font-size: 1.5rem; 
        padding: 0 10px;
      }
      
      .countdown { 
        font-size: 4rem; 
      }
      
      .gift-box { 
        width: 150px; 
        height: 150px; 
      }
      
      .gift-layer-text { 
        font-size: 1rem; 
        margin: 15px auto;
        padding: 8px 12px;
      }
      
      .baloons img {
        display: none;
      }
    }
    
    @media (max-width: 480px) {
      .one {
        font-size: 2.8rem;
      }
      
      .three {
        font-size: 2rem;
      }
      
      .five p {
        font-size: 1.4rem;
      }
      
      .five .idea-5 {
        font-size: 2.5rem;
      }
      
      .idea-6 span {
        font-size: 8rem;
      }
      
      .six img {
        height: 220px;
      }
      
      .wish-hbd {
        font-size: 1.8rem;
      }
      
      .wish h5 {
        font-size: 1.2rem;
      }
      
      .text-box .fake-btn {
        bottom: -40px;
      }
    }
  </style>
</head>
<body>

  <!-- Background music -->
  <audio class="song" loop>
    <source src="./music/hbd.mp3" type="audio/mp3"/>
    Your browser isn't invited for super fun audio time.
  </audio>

  <!-- 3…2…1 -->
  <div id="countdown" class="countdown">3</div>

  <!-- Visual Gift Box with Layers -->
  <div id="gift-container" class="gift-box-container hidden">
    <div id="gift-box" class="gift-box">
      <div class="box"></div>
      <div class="lid"></div>
      <div class="ribbon ribbon-h"></div>
      <div class="ribbon ribbon-v"></div>
      <div class="bow"></div>
    </div>
    
    <div id="gift-layer-text" class="gift-layer-text">
      Click the gift box to unwrap your surprise!
    </div>
    
    <div class="open-instruction">
      Layer <span id="current-layer">1</span> of 5
    </div>
  </div>

  <!-- Video surprise (demo.mp4 in SAME FOLDER as index.html) -->
  <div id="video-overlay" class="video-overlay hidden" aria-hidden="true">
    <video id="surprise-video"
           width="960" height="540"
           preload="metadata"
           playsinline
           controls
           poster="img/poster.jpg">
      <!-- IMPORTANT: demo.mp4 should sit next to index.html -->
      <source src="./demo.mp4" type="video/mp4"/>
      Your browser does not support the video tag.
    </video>
    <p id="video-help" class="video-help hidden">Tap the play ▶️ button to start the video.</p>
  </div>

  <!-- Your original flow -->
  <div class="container hidden">
    <div class="one">
      <h1 class="one">Hi <span id="name">Pratiksha</span></h1>
      <p class="two" id="greetingText">But I really like Tisha btw!</p>
    </div>

    <div class="three"><p>It's your birthday!! :D</p></div>

    <div class="four">
      <div class="text-box">
        <p class="hbd-chatbox">
          Hey… happy birthday! You know I wasn’t doing anything special today, just  wishing you on message like everone one do
        </p>
        <p class="fake-btn">Send</p>
      </div>
    </div>

    <div class="five">
      <p class="idea-1">That's what I was going to do.</p>
      <p class="idea-2">But then I stopped I couldn’t let your birthday pass without letting you know how amazing you are.</p>
      <p class="idea-3">I realised, I wanted to do something<br><strong>special</strong>.</p>
      <p class="idea-4">Because,</p>
      <p class="idea-5">You are Special <span>:)</span></p>
      <p class="idea-6"><span>S</span><span>O</span></p>
    </div>

    <div class="six">
      <img src="./img/tisha.jpg" alt="profile" class="profile-picture" id="imagePath"/>
      <img src="img/hat.svg" alt="hat" class="hat" />
      <div class="wish">
        <h3 class="wish-hbd">Happy Birthday!</h3>
        <h5 id="wishText">Happy Birthday! Wishing you many happy returns of the day.<br>
          You are a wonderful person, and I hope your special day is the beginning of great things.<br>
          May all your dreams come true today and always.<br>
          God bless you! Always be happy and don’t be sad.<br>
          Wishing you everything that brings happiness, and always the best on this special day.<br>
          I feel so lucky to have you as my best friend. Thanks for being such a great friend!<br>
          May your day be as wonderful as you are!
        </h5>

      </div>
    </div>

    <div class="seven">
      <div class="baloons">
        <img src="img/ballon2.svg" alt="" />
        <img src="img/ballon1.svg" alt="" />
        <img src="img/ballon3.svg" alt="" />
        <img src="img/ballon1.svg" alt="" />
        <img src="img/ballon2.svg" alt="" />
        <img src="img/ballon3.svg" alt="" />
      </div>
    </div>

    <div class="eight">
      <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="20" r="20" /></svg>
      <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="20" r="20" /></svg>
      <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="20" r="20" /></svg>
    </div>

    <div class="nine">
      <p>Okay, now come back and tell me if you liked it.</p>
      <p id="replay">Or click, if you want to watch it again.</p>
      <p class="last-smile">:)</p>
    </div>
  </div>

  <!-- Fireworks -->
  <canvas id="fireworks"></canvas>

  <!-- Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- App -->
  <script>
    // ===== Helpers =====
    const $ = (sel, root = document) => root.querySelector(sel);
    const $$ = (sel, root = document) => Array.from(root.querySelectorAll(sel));

    // ===== Elements =====
    const countdownEl   = $("#countdown");
    const giftContainer = $("#gift-container");
    const giftBox       = $("#gift-box");
    const giftLayerText = $("#gift-layer-text");
    const currentLayerEl = $("#current-layer");
    const container     = $(".container");
    const videoOverlay  = $("#video-overlay");
    const surpriseVideo = $("#surprise-video");
    const videoHelp     = $("#video-help");
    const fakeBtn       = $(".fake-btn");

    // Gift layer messages
    const layerMessages = [
      "Click the gift box to unwrap your surprise!",
      "You're getting closer to your surprise!",
      "Just a few more layers to go...",
      "Almost there! One more layer!",
      "This is the final layer! Get ready for your surprise! 🎉"
    ];

    // Current layer state
    let currentLayer = 0;

    // ===== Countdown (3…2…1…Go) =====
    (function startCountdown() {
      let t = 3;
      const tick = setInterval(() => {
        t--;
        if (t > 0) {
          countdownEl.textContent = t;
        } else if (t === 0) {
          countdownEl.textContent = "Go!";
        } else {
          clearInterval(tick);
          countdownEl.classList.add("hidden");
          giftContainer.classList.remove("hidden");
          gsap.fromTo(giftContainer, {autoAlpha: 0, y: 20}, {autoAlpha: 1, y: 0, duration: .6, ease: "power2.out"});
        }
      }, 1000);
    })();

    // ===== Gift Box Click Handler =====
    giftBox.addEventListener("click", async () => {
      // Animate the gift box
      await gsap.to(giftBox, {scale: 0.9, duration: 0.2, ease: "power2.out"});
      await gsap.to(giftBox, {scale: 1, duration: 0.2, ease: "power2.out"});
      
      // Move to next layer
      currentLayer++;
      currentLayerEl.textContent = currentLayer + 1;
      
      if (currentLayer < 5) {
        // Update layer text
        giftLayerText.textContent = layerMessages[currentLayer];
        
        // Animate text change
        gsap.fromTo(giftLayerText, {autoAlpha: 0, y: 10}, {autoAlpha: 1, y: 0, duration: 0.5});
      } else {
        // Final layer - play video
        giftContainer.classList.add("hidden");
        await playSurpriseVideo();
      }
    });

    // ===== Video playback with robust fallbacks =====
    async function playSurpriseVideo() {
      // Show overlay
      videoOverlay.classList.remove("hidden");
      gsap.fromTo(videoOverlay, {autoAlpha: 0}, {autoAlpha: 1, duration: .35});

      // Ensure correct source (demo.mp4 next to index.html)
      // If you ever move the file, update the src below.
      const srcEl = surpriseVideo.querySelector("source");
      srcEl.setAttribute("src", "./demo.mp4");
      surpriseVideo.load(); // important after changing src

      // Try to play after user gesture (click on layer 5)
      try {
        videoHelp.classList.add("hidden");
        await surpriseVideo.play();
      } catch (err) {
        // If browser still blocks (e.g., iOS quirks), show helper text
        console.warn("Autoplay blocked or codec issue:", err);
        videoHelp.classList.remove("hidden");
      }

      // When video ends -> continue to main timeline
      surpriseVideo.onended = () => {
        endVideoAndContinue();
      };

      // If loading fails (bad path / unsupported codec)
      surpriseVideo.onerror = () => {
        Swal.fire({
          icon: 'error',
          title: 'Video could not load',
          html: "Make sure <b>demo.mp4</b> is in the <b>same folder</b> as <b>index.html</b> and is a standard H.264/AAC MP4.",
          confirmButtonText: 'OK'
        }).then(endVideoAndContinue);
      };
    }

    function endVideoAndContinue() {
      // Hide video overlay cleanly (no black circle)
      try {
        surpriseVideo.pause();
        surpriseVideo.currentTime = 0;
      } catch {}
      gsap.to(videoOverlay, {autoAlpha: 0, duration: .3, onComplete: () => {
        videoOverlay.classList.add("hidden");
      }});

      // Now ask for background music and start the classic timeline
      askMusicAndStart();
    }

    // ===== Music prompt then timeline =====
    function askMusicAndStart() {
      Swal.fire({
        title: 'Do you want to play music in the background?',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes',
        cancelButtonText: 'No',
      }).then((result) => {
        if (result.isConfirmed) {
          const song = document.querySelector('.song');
          if (song) song.play().catch(()=>{});
        }
        animationTimeline();
      });
    }

    // ===== ORIGINAL TIMELINE (your code, preserved) =====
    const animationTimeline = () => {
      // split chars
      const textBoxChars = document.getElementsByClassName("hbd-chatbox")[0];
      const hbd = document.getElementsByClassName("wish-hbd")[0];

      textBoxChars.innerHTML = `<span>${textBoxChars.innerHTML.split("").join("</span><span>")}</span>`;
      hbd.innerHTML = `<span>${hbd.innerHTML.split("").join("</span><span>")}</span>`;

      const ideaTextTrans = { opacity: 0, y: -20, rotationX: 5, skewX: "15deg" };
      const ideaTextTransLeave = { opacity: 0, y: 20, rotationY: 5, skewX: "-15deg" };

      // Use GSAP 3 timeline (compatible with old code)
      const tl = gsap.timeline();

      tl.to(".container", { duration: 0.6, visibility: "visible" })
        .from(".one",   { duration: 0.7, opacity: 0, y: 10 })
        .from(".two",   { duration: 0.4, opacity: 0, y: 10 })
        .to(".one",     { duration: 0.7, opacity: 0, y: 10 }, "+=3.5")
        .to(".two",     { duration: 0.7, opacity: 0, y: 10 }, "-=1")
        .from(".three", { duration: 0.7, opacity: 0, y: 10 })
        .to(".three",   { duration: 0.7, opacity: 0, y: 10 }, "+=3")
        .from(".four",  { duration: 0.7, scale: 0.2, opacity: 0 })
        .from(".fake-btn", { duration: 0.3, scale: 0.2, opacity: 0 })
        .to(".container", {duration: 0, className: "-=hidden"}) // ensure visible

        .to({}, {duration: 0}) // spacer
        .add(() => {
          gsap.utils.toArray(".hbd-chatbox span").forEach((el, i) => {
            gsap.to(el, {duration: 1.5, delay: i * 0.05, onStart: ()=> el.style.visibility="visible"});
          });
        })
        .to(".four", { duration: 0.5, scale: 0.2, opacity: 0, y: -150 }, "+=10") // Increased delay to read message
        .from(".idea-1", { duration: 0.7, ...ideaTextTrans })
        .to(".idea-1",   { duration: 0.7, ...ideaTextTransLeave }, "+=2.5")
        .from(".idea-2", { duration: 0.7, ...ideaTextTrans })
        .to(".idea-2",   { duration: 0.7, ...ideaTextTransLeave }, "+=2.5")
        .from(".idea-3", { duration: 0.7, ...ideaTextTrans })
        .to(".idea-3 strong", { duration: 0.5, scale: 1.2, x: 10, backgroundColor: "rgb(21, 161, 237)", color: "#fff" })
        .to(".idea-3",   { duration: 0.7, ...ideaTextTransLeave }, "+=2.5")
        .from(".idea-4", { duration: 0.7, ...ideaTextTrans })
        .to(".idea-4",   { duration: 0.7, ...ideaTextTransLeave }, "+=2.5")
        .from(".idea-5", { duration: 0.7, rotationX: 15, rotationZ: -10, skewY: "-5deg", y: 50, opacity: 0 }, "+=1.5")
        .to(".idea-5",   { duration: 0.7, scale: 0.2, opacity: 0 }, "+=2")
        .from(".idea-6 span", { duration: 0.8, scale: 3, opacity: 0, rotation: 15, stagger: 0.2, ease: "expo.out" })
        .to(".idea-6 span",   { duration: 0.8, scale: 3, opacity: 0, rotation: -15, stagger: 0.2, ease: "expo.out" }, "+=1.5")
        .fromTo(".baloons img", { opacity: 0.9, y: 1400 }, { opacity: 1, y: -1000, duration: 2.5, stagger: 0.2 })
        .from(".profile-picture", { duration: 0.5, scale: 3.5, opacity: 0, x: 25, y: -25, rotationZ: -45 }, "-=2")
        .from(".hat", { duration: 0.5, x: -100, y: 350, rotation: -180, opacity: 0 })
        .from(".wish-hbd span", { duration: 0.7, opacity: 0, y: -50, rotation: 150, skewX: "30deg", ease: "elastic.out(1, 0.5)", stagger: 0.1 })
        .to(".wish-hbd span",   { duration: 0.7, scale: 1, rotationY: 0, color: "#ff69b4", ease: "expo.out", stagger: 0.1 }, "party")
        .from(".wish h5", { duration: 0.5, opacity: 0, y: 10, skewX: "-15deg" }, "party")
        .to(".eight svg", { duration: 1.5, opacity: 0, scale: 80, repeat: 3, repeatDelay: 1.4, stagger: 0.3, onStart: function(){
          gsap.set(".eight svg", {visibility: "visible"});
        }})
        .to(".six", { duration: 0.5, opacity: 0, y: 30, zIndex: -1 })
        .from(".nine p", { duration: 1, ...ideaTextTrans, stagger: 1.2 })
        .to(".last-smile", { duration: 0.5, rotation: 90 }, "+=1");

      // Fireworks trigger near the end (same timing you used)
      setTimeout(() => { startFireworks(); }, 33000);

      // Replay support
      $("#replay").addEventListener("click", () => {
        tl.restart();
      });

      // Fake button click to proceed
      fakeBtn.addEventListener("click", () => {
        tl.play(); // Continue the timeline
      });

      // Ensure main container is not display:none
      container.classList.remove("hidden");
    };

    // ===== Fireworks (unchanged, with a tiny polish) =====
    function startFireworks() {
      const canvas = document.getElementById("fireworks");
      const ctx = canvas.getContext("2d");
      const DPR = window.devicePixelRatio || 1;
      canvas.width = window.innerWidth * DPR;
      canvas.height = window.innerHeight * DPR;
      ctx.scale(DPR, DPR);

      let fireworks = [];
      const random = (min, max) => Math.random() * (max - min) + min;

      class Firework {
        constructor(x, y, colors) {
          this.particles = [];
          for (let i = 0; i < 100; i++) {
            this.particles.push({
              x, y,
              angle: Math.random() * 2 * Math.PI,
              speed: random(2, 7),
              radius: 2,
              alpha: 1,
              color: colors[Math.floor(Math.random() * colors.length)]
            });
          }
        }
        update() {
          this.particles.forEach(p => {
            p.x += Math.cos(p.angle) * p.speed;
            p.y += Math.sin(p.angle) * p.speed;
            p.alpha -= 0.01;
          });
          this.particles = this.particles.filter(p => p.alpha > 0);
        }
        draw() {
          this.particles.forEach(p => {
            ctx.globalAlpha = p.alpha;
            ctx.fillStyle = p.color;
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
            ctx.fill();
          });
          ctx.globalAlpha = 1;
        }
      }

      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        fireworks.forEach((f, i) => {
          f.update();
          f.draw();
          if (f.particles.length === 0) fireworks.splice(i, 1);
        });
        requestAnimationFrame(animate);
      }

      setInterval(() => {
        fireworks.push(new Firework(
          random(100, canvas.width / (window.devicePixelRatio || 1) - 100),
          random(100, canvas.height / (window.devicePixelRatio || 1) - 100),
          ["#ff4b5c", "#ffd700", "#69f0ae", "#42a5f5", "#ff69b4"]
        ));
      }, 800);

      animate();
    }
  </script>
</body>
</html>